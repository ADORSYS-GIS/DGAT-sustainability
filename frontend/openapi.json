{
  "openapi": "3.0.3",
  "info": {
    "title": "Assessment System API",
    "description": "A comprehensive API for managing assessments, submissions, and reviews in a sustainability assessment system.\n\n## Authentication\nAll endpoints require JWT authentication. Include the token in the Authorization header:\n`Authorization: Bearer <your-jwt-token>`\n\n## Versioning\nThe API supports response versioning to track changes and resolve conflicts.\n",
    "contact": {
      "name": "Assessment System Team",
      "email": "support@assessment-system.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:3001/api",
      "description": "Production server"
    },
    {
      "url": "http://localhost:3001/api",
      "description": "Staging server"
    },
    {
      "url": "http://localhost:3001/api",
      "description": "Development server"
    }
  ],
  "security": [
    {
      "BearerAuth": []
    }
  ],
  "paths": {
    "/admin/reports": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get all reports across organizations",
        "description": "Get all reports for all organizations (DGRV admin only)",
        "operationId": "list_all_reports",
        "responses": {
          "200": {
            "description": "List of all organization reports",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminReportListResponse"
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/InternalServerError" }
        }
      }
    },
    "/health": {
      "get": {
        "tags": ["Health"],
        "summary": "Health check",
        "description": "Basic health check endpoint",
        "operationId": "health_check",
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_200"
                }
              }
            }
          }
        }
      }
    },
    "/questions": {
      "get": {
        "tags": ["Questions"],
        "summary": "List questions",
        "description": "Get all questions",
        "responses": {
          "200": {
            "description": "List of questions with their revisions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuestionListWithRevisionsResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "post": {
        "tags": ["Questions"],
        "summary": "Create question",
        "description": "Create a new question (Admin only)",
        "operationId": "create_question",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateQuestionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Question created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuestionResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/questions/{question_id}": {
      "get": {
        "tags": ["Questions"],
        "summary": "Get question",
        "description": "Get specific question with all revisions or a specific revision",
        "operationId": "get_question",
        "parameters": [
          {
            "name": "question_id",
            "in": "path",
            "description": "Question ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "revision_id",
            "in": "query",
            "description": "Specific revision ID to retrieve (optional)",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "language",
            "in": "query",
            "description": "Language for content",
            "required": false,
            "schema": {
              "type": "string",
              "default": "en"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Question details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuestionWithRevisionsResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "put": {
        "tags": ["Questions"],
        "summary": "Update question",
        "description": "Update a question (Admin only). Include question_revision_id for optimistic locking.",
        "operationId": "update_question",
        "parameters": [
          {
            "name": "question_id",
            "in": "path",
            "description": "Question ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "question_revision_id",
            "in": "query",
            "description": "Current revision ID for optimistic locking",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateQuestionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Question updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuestionResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "409": {
            "description": "Conflict - revision mismatch",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/categories": {
      "get": {
        "tags": ["Categories"],
        "summary": "List categories",
        "description": "Get all categories",
        "operationId": "list_categories",
        "responses": {
          "200": {
            "description": "List of categories",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryListResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "post": {
        "tags": ["Categories"],
        "summary": "Create category",
        "description": "Create a new category (Admin only)",
        "operationId": "create_category",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCategoryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Category created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/categories/{category_id}": {
      "get": {
        "tags": ["Categories"],
        "summary": "Get category",
        "description": "Get specific category by ID",
        "operationId": "get_category",
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "description": "Category ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Category details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "put": {
        "tags": ["Categories"],
        "summary": "Update category",
        "description": "Update a category (Admin only)",
        "operationId": "update_category",
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "description": "Category ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCategoryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Category updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "delete": {
        "tags": ["Categories"],
        "summary": "Delete category",
        "description": "Delete a category (Admin only)",
        "operationId": "delete_category",
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "description": "Category ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Category deleted successfully"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/category-catalog": {
      "get": {
        "tags": ["Category Catalog"],
        "summary": "Get all category catalogs",
        "operationId": "get_category_catalogs",
        "responses": {
          "200": {
            "description": "List of category catalogs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryCatalogListResponse"
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/InternalServerError" }
        }
      },
      "post": {
        "tags": ["Category Catalog"],
        "summary": "Create category catalog",
        "operationId": "create_category_catalog",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCategoryCatalogRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Category catalog created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryCatalogResponse"
                }
              }
            }
          },
          "400": { "$ref": "#/components/responses/BadRequest" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/InternalServerError" }
        }
      }
    },
    "/api/category-catalog/{category_catalog_id}": {
      "delete": {
        "tags": ["Category Catalog"],
        "summary": "Delete category catalog",
        "operationId": "delete_category_catalog",
        "parameters": [
          {
            "name": "category_catalog_id",
            "in": "path",
            "description": "Category Catalog ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Category catalog deleted successfully"
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/InternalServerError" }
        }
      }
    },
    "/api/organizations/{keycloak_organization_id}/categories": {
      "get": {
        "tags": ["Organization Categories"],
        "summary": "Get organization categories",
        "operationId": "get_organization_categories",
        "parameters": [
          {
            "name": "keycloak_organization_id",
            "in": "path",
            "description": "Keycloak Organization ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of organization categories",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationCategoryListResponse"
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/InternalServerError" }
        }
      }
    },
    "/api/organizations/{keycloak_organization_id}/categories/assign": {
      "post": {
        "tags": ["Organization Categories"],
        "summary": "Assign categories to organization",
        "operationId": "assign_categories_to_organization",
        "parameters": [
          {
            "name": "keycloak_organization_id",
            "in": "path",
            "description": "Keycloak Organization ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignCategoriesToOrganizationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Categories assigned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationCategoryListResponse"
                }
              }
            }
          },
          "400": { "$ref": "#/components/responses/BadRequest" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/InternalServerError" }
        }
      }
    },
    "/api/organizations/{keycloak_organization_id}/categories/{organization_category_id}": {
      "put": {
        "tags": ["Organization Categories"],
        "summary": "Update organization category",
        "operationId": "update_organization_category",
        "parameters": [
          {
            "name": "keycloak_organization_id",
            "in": "path",
            "description": "Keycloak Organization ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "organization_category_id",
            "in": "path",
            "description": "Organization Category ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateOrganizationCategoryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Organization category updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationCategoryResponse"
                }
              }
            }
          },
          "400": { "$ref": "#/components/responses/BadRequest" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/InternalServerError" }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AdminReport": {
        "type": "object",
        "properties": {
          "report_id": { "type": "string", "format": "uuid" },
          "submission_id": { "type": "string", "format": "uuid" },
          "org_id": { "type": "string" },
          "org_name": { "type": "string" },
          "status": { "type": "string" },
          "generated_at": { "type": "string", "format": "date-time" },
          "data": { "type": "object", "nullable": true }
        },
        "required": [
          "report_id",
          "submission_id",
          "org_id",
          "org_name",
          "status",
          "generated_at"
        ]
      },
      "AdminReportListResponse": {
        "type": "object",
        "properties": {
          "reports": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/AdminReport" }
          }
        },
        "required": ["reports"]
      },
      "Question": {
        "required": ["question_id", "category", "created_at", "latest_revision"],
        "type": "object",
        "properties": {
          "question_id": {
            "type": "string",
            "format": "uuid"
          },
          "category": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "latest_revision": {
            "$ref": "#/components/schemas/QuestionRevision"
          }
        }
      },
      "QuestionRevision": {
        "required": [
          "question_revision_id",
          "question_id",
          "text",
          "weight",
          "created_at"
        ],
        "type": "object",
        "properties": {
          "question_revision_id": {
            "type": "string",
            "format": "uuid"
          },
          "question_id": {
            "type": "string",
            "format": "uuid"
          },
          "text": {
            "type": "object"
          },
          "weight": {
            "type": "number"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateQuestionRequest": {
        "required": ["category", "text"],
        "type": "object",
        "properties": {
          "category": {
            "type": "string"
          },
          "text": {
            "type": "object",
            "default": {
              "en": "explain your ecological policies"
            }
          },
          "weight": {
            "type": "number",
            "default": 1.0
          }
        }
      },
      "UpdateQuestionRequest": {
        "type": "object",
        "properties": {
          "category": {
            "type": "string"
          },
          "text": {
            "type": "object"
          },
          "weight": {
            "type": "number"
          }
        }
      },
      "QuestionListResponse": {
        "required": ["questions"],
        "type": "object",
        "properties": {
          "questions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Question"
            }
          }
        }
      },
      "QuestionListWithRevisionsResponse": {
        "required": ["questions"],
        "type": "object",
        "properties": {
          "questions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/QuestionWithRevisionsResponse"
            }
          }
        }
      },
      "QuestionResponse": {
        "required": ["question"],
        "type": "object",
        "properties": {
          "question": {
            "$ref": "#/components/schemas/Question"
          }
        }
      },
      "QuestionWithRevisionsResponse": {
        "required": ["question", "revisions"],
        "type": "object",
        "properties": {
          "question": {
            "$ref": "#/components/schemas/Question"
          },
          "revisions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/QuestionRevision"
            }
          }
        }
      },
      "QuestionRevisionListResponse": {
        "required": ["revisions"],
        "type": "object",
        "properties": {
          "revisions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/QuestionRevision"
            }
          }
        }
      },
      "QuestionRevisionResponse": {
        "required": ["revision"],
        "type": "object",
        "properties": {
          "revision": {
            "$ref": "#/components/schemas/QuestionRevision"
          }
        }
      },
      "Assessment": {
        "required": ["assessment_id", "created_at", "language", "org_id", "name", "status", "updated_at"],
        "type": "object",
        "properties": {
          "assessment_id": {
            "type": "string",
            "format": "uuid"
          },
          "org_id": {
            "type": "string"
          },
          "language": {
            "type": "string",
            "default": "en"
          },
          "name": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "categories": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "description": "List of category UUIDs assigned to this assessment"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "UpdateAssessmentRequest": {
        "type": "object",
        "properties": {
          "language": {
            "type": "string"
          }
        }
      },
      "AssessmentListResponse": {
        "required": ["assessments"],
        "type": "object",
        "properties": {
          "assessments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Assessment"
            }
          }
        }
      },
      "AssessmentResponse": {
        "required": ["assessment"],
        "type": "object",
        "properties": {
          "assessment": {
            "$ref": "#/components/schemas/Assessment"
          }
        }
      },
      "AssessmentDetailResponse": {
        "required": ["assessment", "questions", "responses"],
        "type": "object",
        "properties": {
          "assessment": {
            "$ref": "#/components/schemas/Assessment"
          },
          "questions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/QuestionRevision"
            }
          },
          "responses": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Response"
            }
          }
        }
      },
      "Response": {
        "required": [
          "assessment_id",
          "question_revision_id",
          "response",
          "response_id",
          "updated_at",
          "version"
        ],
        "type": "object",
        "properties": {
          "response_id": {
            "type": "string",
            "format": "uuid"
          },
          "assessment_id": {
            "type": "string",
            "format": "uuid"
          },
          "question_revision_id": {
            "type": "string",
            "format": "uuid"
          },
          "response": {
            "type": "string"
          },
          "version": {
            "type": "integer"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateResponseRequest": {
        "required": ["question_revision_id", "response"],
        "type": "object",
        "properties": {
          "question_revision_id": {
            "type": "string",
            "format": "uuid"
          },
          "response": {
            "type": "string"
          },
          "version": {
            "type": "integer",
            "description": "Version for conflict resolution"
          }
        }
      },
      "UpdateResponseRequest": {
        "required": ["response"],
        "type": "object",
        "properties": {
          "response": {
            "type": "string"
          }
        }
      },
      "ResponseListResponse": {
        "required": ["responses"],
        "type": "object",
        "properties": {
          "responses": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Response"
            }
          }
        }
      },
      "ResponseResponse": {
        "required": ["response"],
        "type": "object",
        "properties": {
          "response": {
            "$ref": "#/components/schemas/Response"
          }
        }
      },
      "ResponseDetailResponse": {
        "required": ["files", "question", "response"],
        "type": "object",
        "properties": {
          "response": {
            "$ref": "#/components/schemas/Response"
          },
          "question": {
            "$ref": "#/components/schemas/QuestionRevision"
          },
          "files": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FileMetadata"
            }
          }
        }
      },
      "ResponseHistoryResponse": {
        "required": ["history"],
        "type": "object",
        "properties": {
          "history": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Response"
            }
          }
        }
      },
      "Submission": {
        "required": [
          "assessment_id",
          "assessment_name",
          "content",
          "review_status",
          "submission_id",
          "submitted_at",
          "user_id"
        ],
        "type": "object",
        "properties": {
          "submission_id": {
            "type": "string",
            "format": "uuid"
          },
          "assessment_id": {
            "type": "string",
            "format": "uuid"
          },
          "assessment_name": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "content": {
            "$ref": "#/components/schemas/Submission_content"
          },
          "review_status": {
            "type": "string",
            "enum": [
              "pending_review",
              "under_review",
              "approved",
              "rejected",
              "revision_requested"
            ]
          },
          "submitted_at": {
            "type": "string",
            "format": "date-time"
          },
          "reviewed_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "DraftSubmission": {
        "required": [
          "assessment_id",
          "content",
          "draft_submission_id",
          "submitted_at",
          "user_id"
        ],
        "type": "object",
        "properties": {
          "draft_submission_id": {
            "type": "string",
            "format": "uuid"
          },
          "assessment_id": {
            "type": "string",
            "format": "uuid"
          },
          "user_id": {
            "type": "string"
          },
          "content": {
            "$ref": "#/components/schemas/Submission_content"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending_approval",
              "approved",
              "rejected"
            ],
            "default": "pending_approval"
          },
          "submitted_at": {
            "type": "string",
            "format": "date-time"
          },
          "reviewed_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "SubmissionListResponse": {
        "required": ["submissions"],
        "type": "object",
        "properties": {
          "submissions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Submission"
            }
          }
        }
      },
      "SubmissionResponse": {
        "required": ["submission"],
        "type": "object",
        "properties": {
          "submission": {
            "$ref": "#/components/schemas/Submission"
          }
        }
      },
      "DraftSubmissionResponse": {
        "required": ["draft_submission"],
        "type": "object",
        "properties": {
          "draft_submission": {
            "$ref": "#/components/schemas/DraftSubmission"
          }
        }
      },
      "DraftSubmissionListResponse": {
        "required": ["draft_submissions"],
        "type": "object",
        "properties": {
          "draft_submissions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DraftSubmission"
            }
          }
        }
      },
      "SubmissionDetailResponse": {
        "required": ["current_review", "submission"],
        "type": "object",
        "properties": {
          "submission": {
            "$ref": "#/components/schemas/Submission"
          },
          "current_review": {
            "$ref": "#/components/schemas/Review"
          }
        }
      },
      "AdminSubmissionListResponse": {
        "required": ["submissions"],
        "type": "object",
        "properties": {
          "submissions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdminSubmissionDetail"
            }
          }
        }
      },
      "AdminSubmissionDetail": {
        "required": [
          "assessment_id",
          "content",
          "review_status",
          "submission_id",
          "submitted_at",
          "user_id",
          "org_id",
          "org_name"
        ],
        "type": "object",
        "properties": {
          "submission_id": {
            "type": "string",
            "description": "Unique submission identifier",
            "format": "uuid"
          },
          "assessment_id": {
            "type": "string",
            "description": "Original assessment that was submitted",
            "format": "uuid"
          },
          "user_id": {
            "type": "string",
            "description": "User who submitted the assessment"
          },
          "org_id": {
            "type": "string",
            "description": "Organization ID that submitted the assessment"
          },
          "org_name": {
            "type": "string",
            "description": "Organization name that submitted the assessment"
          },
          "content": {
            "$ref": "#/components/schemas/AdminSubmissionDetail_content"
          },
          "review_status": {
            "type": "string",
            "description": "Current review status",
            "enum": [
              "pending_review",
              "under_review",
              "approved",
              "rejected",
              "revision_requested"
            ]
          },
          "submitted_at": {
            "type": "string",
            "description": "Submission timestamp",
            "format": "date-time"
          },
          "reviewed_at": {
            "type": "string",
            "description": "Review completion timestamp",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "Review": {
        "required": [
          "created_at",
          "review_id",
          "reviewer_id",
          "status",
          "submission_id"
        ],
        "type": "object",
        "properties": {
          "review_id": {
            "type": "string",
            "format": "uuid"
          },
          "submission_id": {
            "type": "string",
            "format": "uuid"
          },
          "reviewer_id": {
            "type": "string"
          },
          "reviewer_email": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": ["pending", "in_progress", "completed"]
          },
          "decision": {
            "type": "string",
            "nullable": true,
            "enum": ["approved", "rejected", "revision_requested"]
          },
          "comments": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "completed_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "AdminReview": {
        "required": [
          "created_at",
          "review_id",
          "reviewer_email",
          "reviewer_id",
          "status",
          "submission_id",
          "user_email"
        ],
        "type": "object",
        "properties": {
          "review_id": {
            "type": "string",
            "format": "uuid"
          },
          "submission_id": {
            "type": "string",
            "format": "uuid"
          },
          "user_email": {
            "type": "string"
          },
          "reviewer_id": {
            "type": "string"
          },
          "reviewer_email": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "in_progress", "completed"]
          },
          "decision": {
            "type": "string",
            "nullable": true,
            "enum": ["approved", "rejected", "revision_requested"]
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AdminReviewListResponse": {
        "required": ["reviews"],
        "type": "object",
        "properties": {
          "reviews": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdminReview"
            }
          }
        }
      },
      "Report": {
        "required": [
          "generated_at",
          "report_id",
          "report_type",
          "status",
          "submission_id"
        ],
        "type": "object",
        "properties": {
          "report_id": {
            "type": "string",
            "format": "uuid"
          },
          "submission_id": {
            "type": "string",
            "format": "uuid"
          },
          "report_type": {
            "type": "string",
            "enum": ["sustainability", "compliance", "summary", "detailed"]
          },
          "status": {
            "type": "string",
            "enum": ["generating", "completed", "failed"]
          },
          "generated_at": {
            "type": "string",
            "format": "date-time"
          },
          "data": {
            "type": "object",
            "nullable": true
          }
        }
      },
      "GenerateReportRequest": {
        "type": "object",
        "properties": {
          "recommendation_id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the recommendation"
          },
          "category": {
            "type": "string",
            "description": "Category name"
          },
          "recommendation": {
            "type": "string",
            "description": "Recommendation text"
          },
          "status": {
            "type": "string",
            "enum": ["todo", "in_progress", "done", "approved"],
            "description": "Status for the recommendation",
            "default": "todo"
          }
        },
        "required": ["recommendation_id", "category", "recommendation"]
      },
      "ReportGenerationResponse": {
        "required": ["report_id", "status"],
        "type": "object",
        "properties": {
          "report_id": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": ["generating", "completed", "failed"]
          }
        }
      },
      "ReportListResponse": {
        "required": ["reports"],
        "type": "object",
        "properties": {
          "reports": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Report"
            }
          }
        }
      },
      "ReportResponse": {
        "required": ["report"],
        "type": "object",
        "properties": {
          "report": {
            "$ref": "#/components/schemas/Report"
          }
        }
      },
      "FileMetadata": {
        "required": ["file_id", "metadata"],
        "type": "object",
        "properties": {
          "file_id": {
            "type": "string",
            "format": "uuid"
          },
          "metadata": {
            "type": "object",
            "description": "File metadata including filename, size, content type, etc."
          }
        }
      },
      "FileResponse": {
        "required": ["file"],
        "type": "object",
        "properties": {
          "file": {
            "$ref": "#/components/schemas/FileMetadata"
          }
        }
      },
      "FileMetadataResponse": {
        "required": ["file_id", "metadata"],
        "type": "object",
        "properties": {
          "file_id": {
            "type": "string",
            "format": "uuid"
          },
          "metadata": {
            "type": "object"
          }
        }
      },
      "Error": {
        "required": ["error", "message"],
        "type": "object",
        "properties": {
          "error": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "details": {
            "type": "object",
            "nullable": true
          }
        }
      },
      "ValidationError": {
        "required": ["error", "message", "validation_errors"],
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "example": "validation_failed"
          },
          "message": {
            "type": "string",
            "example": "Request validation failed"
          },
          "validation_errors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ValidationError_validation_errors"
            }
          }
        }
      },
      "inline_response_200": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "healthy"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "files_body": {
        "type": "object",
        "properties": {
          "file": {
            "type": "string",
            "format": "binary"
          },
          "metadata": {
            "type": "string",
            "description": "JSON metadata for the file"
          }
        }
      },
      "response_id_files_body": {
        "type": "object",
        "properties": {
          "file_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "Submission_content_assessment": {
        "type": "object",
        "properties": {
          "assessment_id": {
            "type": "string",
            "format": "uuid",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "language": {
            "type": "string",
            "example": "en"
          }
        }
      },
      "Submission_content_responses": {
        "type": "object",
        "properties": {
          "question": {
            "type": "string",
            "format": "uuid"
          },
          "response": {
            "type": "string",
            "example": "Our organization has a comprehensive sustainability policy"
          },
          "files": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FileMetadata"
            }
          }
        }
      },
      "Submission_content": {
        "type": "object",
        "properties": {
          "assessment": {
            "$ref": "#/components/schemas/Submission_content_assessment"
          },
          "responses": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Submission_content_responses"
            }
          }
        },
        "description": "Immutable snapshot of assessment and all responses"
      },
      "AdminSubmissionDetail_content_responses": {
        "type": "object",
        "properties": {
          "question_text": {
            "type": "string",
            "description": "The actual question text (mapped from question_revision_id)",
            "example": "What is your organization's sustainability policy?"
          },
          "question_category": {
            "type": "string",
            "description": "Question category",
            "example": "Environmental"
          },
          "response": {
            "type": "string",
            "description": "User's response to the question",
            "example": "Our organization has a comprehensive sustainability policy"
          },
          "files": {
            "type": "array",
            "description": "Attached files with complete metadata",
            "items": {
              "$ref": "#/components/schemas/FileMetadata"
            }
          }
        }
      },
      "AdminSubmissionDetail_content": {
        "type": "object",
        "properties": {
          "assessment": {
            "$ref": "#/components/schemas/Submission_content_assessment"
          },
          "responses": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdminSubmissionDetail_content_responses"
            }
          }
        },
        "description": "Immutable snapshot of assessment and all responses with question text"
      },
      "ValidationError_validation_errors": {
        "type": "object",
        "properties": {
          "field": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "Organization": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique organization identifier"
          },
          "name": { "type": "string", "description": "Organization name" },
          "description": {
            "type": "string",
            "nullable": true,
            "description": "Organization description"
          },
          "country": {
            "type": "string",
            "nullable": true,
            "description": "Organization country"
          },
          "attributes": {
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": { "type": "string" }
            },
            "description": "Additional organization attributes"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Organization creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Organization last update timestamp"
          }
        },
        "required": ["id", "name"]
      },
      "OrganizationCreateRequest": {
        "type": "object",
        "required": ["name", "domains", "redirectUrl", "enabled"],
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the organization",
            "example": "adorsy51s",
            "minLength": 1,
            "maxLength": 255
          },
          "domains": {
            "type": "array",
            "description": "List of domains associated with the organization",
            "items": { "$ref": "#/components/schemas/OrganizationDomain" },
            "minItems": 1,
            "example": [{ "name": "yd5es.com" }]
          },
          "redirectUrl": {
            "type": "string",
            "description": "The redirect URL for the organization",
            "format": "uri",
            "example": "http://localhost:5173"
          },
          "enabled": {
            "type": "string",
            "description": "Whether the organization is enabled (sent as string)",
            "enum": ["true", "false"],
            "example": "true"
          },
          "attributes": {
            "type": "object",
            "description": "Custom attributes for the organization",
            "additionalProperties": {
              "type": "array",
              "items": { "type": "string" }
            },
            "example": {
              "categories": ["environmental"],
              "industry": ["technology", "sustainability"]
            }
          }
        }
      },
      "OrganizationDomain": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "description": "The domain name",
            "format": "hostname",
            "example": "yd5es.com",
            "pattern": "^[a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?)*$"
          }
        }
      },
      "OrganizationResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the organization",
            "example": "org-123-456"
          },
          "name": {
            "type": "string",
            "description": "The name of the organization",
            "example": "adorsy51s"
          },
          "domains": {
            "type": "array",
            "description": "List of domain names associated with the organization",
            "items": { "type": "string" },
            "example": ["yd5es.com"]
          },
          "attributes": {
            "type": "object",
            "description": "All attributes including domains, redirect_url, enabled status, and custom attributes",
            "additionalProperties": {
              "type": "array",
              "items": { "type": "string" }
            },
            "example": {
              "domains": ["yd5es.com"],
              "redirect_url": ["http://localhost:5173"],
              "enabled": ["true"],
              "categories": ["environmental"]
            }
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error type or category",
            "example": "Bad Request"
          },
          "message": {
            "type": "string",
            "description": "Detailed error message",
            "example": "Invalid organization data provided"
          }
        }
      },
      "OrganizationMember": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "description": "User identifier" },
          "username": { "type": "string", "description": "Username" },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email"
          },
          "emailVerified": {
            "type": "boolean",
            "description": "Whether the user's email is verified"
          },
          "firstName": {
            "type": "string",
            "nullable": true,
            "description": "User first name"
          },
          "lastName": {
            "type": "string",
            "nullable": true,
            "description": "User last name"
          },
          "roles": {
            "type": "array",
            "items": { "type": "string" },
            "description": "User roles in the organization"
          },
          "joinedAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the user joined the organization"
          }
        },
        "required": ["id", "username", "email", "roles"]
      },
      "OrganizationMembership": {
        "type": "object",
        "properties": {
          "membership_id": {
            "type": "string",
            "description": "Unique membership identifier"
          },
          "user_id": { "type": "string", "description": "User identifier" },
          "organization_id": {
            "type": "string",
            "description": "Organization identifier"
          },
          "roles": {
            "type": "array",
            "items": { "type": "string" },
            "description": "User roles in the organization"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Membership creation timestamp"
          }
        },
        "required": ["membership_id", "user_id", "organization_id", "roles"]
      },
      "MemberRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email to add to the organization"
          },
          "roles": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Roles to assign to the user"
          }
        },
        "required": ["email", "roles"]
      },
      "RoleAssignment": {
        "type": "object",
        "properties": {
          "roles": {
            "type": "array",
            "items": { "type": "string" },
            "description": "New roles to assign to the user"
          }
        },
        "required": ["roles"]
      },
      "OrganizationInvitation": {
        "type": "object",
        "properties": {
          "invitation_id": {
            "type": "string",
            "description": "Unique invitation identifier"
          },
          "organization_id": {
            "type": "string",
            "description": "Organization identifier"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address of the invited user"
          },
          "roles": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Roles to assign when invitation is accepted"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "accepted", "expired", "cancelled"],
            "description": "Invitation status"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Invitation creation timestamp"
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Invitation expiration timestamp"
          },
          "invited_by": {
            "type": "string",
            "description": "User ID who created the invitation"
          }
        },
        "required": [
          "invitation_id",
          "organization_id",
          "email",
          "roles",
          "status",
          "created_at",
          "invited_by"
        ]
      },
      "InvitationRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address of the user to invite"
          },
          "roles": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Roles to assign when invitation is accepted"
          },
          "expiration": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Optional invitation expiration timestamp"
          }
        },
        "required": ["email", "roles"]
      },
      "OrgAdminMemberRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email to add to the organization"
          },
          "first_name": {
            "type": "string",
            "description": "User's first name"
          },
          "last_name": {
            "type": "string",
            "description": "User's last name"
          },
          "roles": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Roles to assign to the user"
          },
          "categories": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Categories to assign to the user (optional)"
          }
        },
        "required": ["email", "roles"]
      },
      "OrgAdminMemberCategoryUpdateRequest": {
        "type": "object",
        "properties": {
          "categories": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Categories to assign to the user (optional)"
          }
        },
        "required": ["categories"]
      },
      "OrgAdminUserInvitationResponse": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email"
          },
          "status": {
            "type": "string",
            "description": "Invitation status"
          },
          "message": {
            "type": "string",
            "description": "Response message"
          }
        },
        "required": ["user_id", "email", "status", "message"]
      },
      "OrgAssessmentResults": {
        "type": "object",
        "properties": {
          "org_id": { "type": "string", "description": "Organization ID" },
          "num_assessments": {
            "type": "integer",
            "description": "Number of assessments in the org"
          },
          "num_submissions": {
            "type": "integer",
            "description": "Number of submissions in the org"
          },
          "category_counts": {
            "type": "object",
            "additionalProperties": { "type": "integer" },
            "description": "Map of category name to number of answers/submissions"
          }
        },
        "required": [
          "org_id",
          "num_assessments",
          "num_submissions",
          "category_counts"
        ]
      },
      "CreateAssessmentRequest": {
        "type": "object",
        "properties": {
          "language": {
            "type": "string",
            "description": "Language for the assessment"
          },
          "name": {
            "type": "string",
            "description": "Name of the assessment"
          },
          "categories": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "description": "List of category UUIDs to assign to this assessment (org_admin only)"
          }
        },
        "required": ["language", "name"]
      },
      "Category": {
        "required": ["category_id", "name", "weight", "order", "template_id", "created_at", "updated_at"],
        "type": "object",
        "properties": {
          "category_id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "weight": {
            "type": "integer"
          },
          "order": {
            "type": "integer"
          },
          "template_id": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateCategoryRequest": {
        "required": ["name", "weight", "order", "template_id"],
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "weight": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100
          },
          "order": {
            "type": "integer",
            "minimum": 1
          },
          "template_id": {
            "type": "string"
          }
        }
      },
      "UpdateCategoryRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "weight": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100
          },
          "order": {
            "type": "integer",
            "minimum": 1
          }
        }
      },
      "CategoryResponse": {
        "required": ["category"],
        "type": "object",
        "properties": {
          "category": {
            "$ref": "#/components/schemas/Category"
          }
        }
      },
      "CategoryListResponse": {
        "required": ["categories"],
        "type": "object",
        "properties": {
          "categories": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Category"
            }
          }
        }
      },
      "UserInvitationRequest": {
        "required": ["email", "first_name", "last_name", "organization_id"],
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email address"
          },
          "first_name": {
            "type": "string",
            "description": "User first name"
          },
          "last_name": {
            "type": "string",
            "description": "User last name"
          },
          "organization_id": {
            "type": "string",
            "description": "Organization ID to invite user to"
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Roles to assign to the user",
            "default": ["org_user"]
          },
          "categories": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Categories to assign to the user (optional)"
          }
        }
      },
      "UserInvitationResponse": {
        "required": ["user_id", "email", "status", "message"],
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "Created user ID"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email address"
          },
          "status": {
            "type": "string",
            "enum": ["pending_email_verification", "email_verified", "pending_org_invitation", "active", "error"],
            "description": "Current invitation status"
          },
          "message": {
            "type": "string",
            "description": "Status message"
          }
        }
      },
      "RecommendationWithStatus": {
        "required": ["recommendation_id", "report_id", "category", "recommendation", "status", "created_at"],
        "type": "object",
        "properties": {
          "recommendation_id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the recommendation"
          },
          "report_id": {
            "type": "string",
            "format": "uuid",
            "description": "Report ID"
          },
          "category": {
            "type": "string",
            "description": "Category name"
          },
          "recommendation": {
            "type": "string",
            "description": "Recommendation text"
          },
          "status": {
            "type": "string",
            "enum": ["todo", "in_progress", "done", "approved"],
            "description": "Current status of the recommendation"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the recommendation was created"
          }
        }
      },
      "OrganizationActionPlan": {
        "required": ["organization_id", "organization_name", "recommendations"],
        "type": "object",
        "properties": {
          "organization_id": {
            "type": "string",
            "format": "uuid",
            "description": "Organization ID"
          },
          "organization_name": {
            "type": "string",
            "description": "Organization name"
          },
          "recommendations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RecommendationWithStatus"
            },
            "description": "List of recommendations for this organization"
          }
        }
      },
      "ActionPlanListResponse": {
        "required": ["organizations"],
        "type": "object",
        "properties": {
          "organizations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrganizationActionPlan"
            },
            "description": "List of organizations with their action plans"
          }
        }
      },
      "UpdateRecommendationStatusRequest": {
        "required": ["report_id", "category", "recommendation_id", "status"],
        "type": "object",
        "properties": {
          "report_id": {
            "type": "string",
            "format": "uuid",
            "description": "Report ID"
          },
          "category": {
            "type": "string",
            "description": "Category name"
          },
          "recommendation_id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the recommendation to update"
          },
          "status": {
            "type": "string",
            "enum": ["todo", "in_progress", "done", "approved"],
            "description": "New status for the recommendation"
          }
        }
      },
      "CategoryCatalog": {
        "type": "object",
        "required": [
          "category_catalog_id",
          "name",
          "template_id",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "category_catalog_id": { "type": "string", "format": "uuid" },
          "name": { "type": "string" },
          "description": { "type": "string", "nullable": true },
          "template_id": { "type": "string" },
          "is_active": { "type": "boolean" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" }
        }
      },
      "CreateCategoryCatalogRequest": {
        "type": "object",
        "required": ["name", "template_id"],
        "properties": {
          "name": { "type": "string" },
          "description": { "type": "string" },
          "template_id": { "type": "string" },
          "is_active": { "type": "boolean", "default": true }
        }
      },
      "CategoryCatalogResponse": {
        "type": "object",
        "required": ["category_catalog"],
        "properties": {
          "category_catalog": { "$ref": "#/components/schemas/CategoryCatalog" }
        }
      },
      "CategoryCatalogListResponse": {
        "type": "object",
        "required": ["category_catalogs"],
        "properties": {
          "category_catalogs": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/CategoryCatalog" }
          }
        }
      },
      "OrganizationCategory": {
        "type": "object",
        "required": [
          "organization_category_id",
          "keycloak_organization_id",
          "category_catalog_id",
          "category_name",
          "weight",
          "order",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "organization_category_id": { "type": "string" },
          "keycloak_organization_id": { "type": "string" },
          "category_catalog_id": { "type": "string" },
          "category_name": { "type": "string" },
          "weight": { "type": "number" },
          "order": { "type": "integer" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" }
        }
      },
      "AssignCategoriesToOrganizationRequest": {
        "type": "object",
        "required": ["category_catalog_ids"],
        "properties": {
          "category_catalog_ids": {
            "type": "array",
            "items": { "type": "string" }
          },
          "weights": {
            "type": "array",
            "items": { "type": "number" },
            "description": "Optional weights aligned with category_catalog_ids"
          }
        }
      },
      "OrganizationCategoryResponse": {
        "type": "object",
        "required": ["organization_category"],
        "properties": {
          "organization_category": { "$ref": "#/components/schemas/OrganizationCategory" }
        }
      },
      "OrganizationCategoryListResponse": {
        "type": "object",
        "required": ["organization_categories"],
        "properties": {
          "organization_categories": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/OrganizationCategory" }
          }
        }
      },
      "UpdateOrganizationCategoryRequest": {
        "type": "object",
        "properties": {
          "weight": { "type": "number" },
          "order": { "type": "integer" }
        }
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Bad Request",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ValidationError"
            }
          }
        }
      },
      "Unauthorized": {
        "description": "Unauthorized",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "Forbidden": {
        "description": "Forbidden",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "NotFound": {
        "description": "Not Found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "Conflict": {
        "description": "Conflict",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "InternalServerError": {
        "description": "Internal Server Error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      }
    },
    "parameters": {
      "QuestionId": {
        "name": "question_id",
        "in": "path",
        "description": "Question ID",
        "required": true,
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "AssessmentId": {
        "name": "assessment_id",
        "in": "path",
        "description": "Assessment ID",
        "required": true,
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "ResponseId": {
        "name": "response_id",
        "in": "path",
        "description": "Response ID",
        "required": true,
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "SubmissionId": {
        "name": "submission_id",
        "in": "path",
        "description": "Submission ID",
        "required": true,
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "ReportId": {
        "name": "report_id",
        "in": "path",
        "description": "Report ID",
        "required": true,
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "FileId": {
        "name": "file_id",
        "in": "path",
        "description": "File ID",
        "required": true,
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "Language": {
        "name": "language",
        "in": "query",
        "description": "Language for content",
        "required": false,
        "schema": {
          "type": "string",
          "default": "en"
        }
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}
